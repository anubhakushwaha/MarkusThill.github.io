<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<!--<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>-->
<!--<script type="text/x-mathjax-config">MathJax.Hub.Config({ TeX: { equationNumbers: {autoNumber: "AMS"} } });</script>-->
<head>
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script type="text/x-mathjax-config">MathJax.Hub.Config({ TeX: { equationNumbers: {autoNumber: "AMS"} } });</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script>
  function resizeIframe(obj) {
    obj.style.height = obj.contentWindow.document.body.scrollHeight + 'px';
  }
</script>

<meta charset="utf-8">
<title>The Monkey and Coconut Problem &#8211; ML & Stats</title>
<meta name="description" content="Describe your website here.">
<meta name="keywords" content="">



<!-- Open Graph -->
<meta property="og:locale" content="en">
<meta property="og:type" content="article">
<meta property="og:title" content="The Monkey and Coconut Problem">
<meta property="og:description" content="Describe your website here.">
<meta property="og:url" content="https://MarkusThill.github.io/math/stats/the-sailors-problem/">
<meta property="og:site_name" content="ML & Stats">
<meta property="og:image" content="https://MarkusThill.github.io/images/sourcedargent.jpg">






<link rel="canonical" href="https://MarkusThill.github.io/math/stats/the-sailors-problem/">
<link href="https://MarkusThill.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="ML & Stats Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>

<!-- For all browsers -->
<link rel="stylesheet" href="https://MarkusThill.github.io/assets/css/main.css">
<link rel="stylesheet" href="https://MarkusThill.github.io/assets/css/jquery.mmenu.all.css">
<link rel="stylesheet" href="https://MarkusThill.github.io/assets/css/jquery.floating-social-share.min.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script type="text/javascript" src="https://MarkusThill.github.io/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="https://MarkusThill.github.io/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="https://MarkusThill.github.io/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="https://MarkusThill.github.io/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://MarkusThill.github.io/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://MarkusThill.github.io/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://MarkusThill.github.io/images/apple-touch-icon-144x144-precomposed.png">




<!--<link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/dreampulse/computer-modern-web-font/master/fonts.css">-->
<link rel="stylesheet" href="/fonts/cmun-serif.css"></link>

<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>The Monkey and Coconut Problem | ML &amp; Stats</title>
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="The Monkey and Coconut Problem" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Three sailors, who live together with a monkey as shipwrecked on an abandoned island, collected one day a heap of coconuts, which is to be divided in the early of the next day among the sailors. Sometime in the night one of the sailors gets up and divides the pile into 3 equal parts. A coconut remains, which he gives to the monkey. Afterwards he hides his share and puts the remaining coconuts together again to a heap. Later that night, the other two sailors also get up and repeat the work of the first sailor. The following morning the three sailors get up, divide the remaining pile into three parts. Again a coconut remains, which they give to the monkey. How many coconuts were originally in the heap? Also, a general solution is to be found for n coconuts, k sailors and m monkeys." />
<meta property="og:description" content="Three sailors, who live together with a monkey as shipwrecked on an abandoned island, collected one day a heap of coconuts, which is to be divided in the early of the next day among the sailors. Sometime in the night one of the sailors gets up and divides the pile into 3 equal parts. A coconut remains, which he gives to the monkey. Afterwards he hides his share and puts the remaining coconuts together again to a heap. Later that night, the other two sailors also get up and repeat the work of the first sailor. The following morning the three sailors get up, divide the remaining pile into three parts. Again a coconut remains, which they give to the monkey. How many coconuts were originally in the heap? Also, a general solution is to be found for n coconuts, k sailors and m monkeys." />
<link rel="canonical" href="https://markusthill.github.io/math/stats/the-sailors-problem/" />
<meta property="og:url" content="https://markusthill.github.io/math/stats/the-sailors-problem/" />
<meta property="og:site_name" content="ML &amp; Stats" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-07-06T20:06:57+02:00" />
<script type="application/ld+json">
{"description":"Three sailors, who live together with a monkey as shipwrecked on an abandoned island, collected one day a heap of coconuts, which is to be divided in the early of the next day among the sailors. Sometime in the night one of the sailors gets up and divides the pile into 3 equal parts. A coconut remains, which he gives to the monkey. Afterwards he hides his share and puts the remaining coconuts together again to a heap. Later that night, the other two sailors also get up and repeat the work of the first sailor. The following morning the three sailors get up, divide the remaining pile into three parts. Again a coconut remains, which they give to the monkey. How many coconuts were originally in the heap? Also, a general solution is to be found for n coconuts, k sailors and m monkeys.","headline":"The Monkey and Coconut Problem","dateModified":"2018-07-06T20:06:57+02:00","datePublished":"2018-07-06T20:06:57+02:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://markusthill.github.io/math/stats/the-sailors-problem/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://markusthill.github.io/images/logo.png"}},"url":"https://markusthill.github.io/math/stats/the-sailors-problem/","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body id="post" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="https://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->



<div class="header-menu header-menu-top">
    <ul class="header-item-container">
      <li class="header-item-title header-toggle "><a href="#menu"><h2><i class="fa fa-bars"></i></h2></a></li>
      <li class="header-item-title">
        <a href="https://MarkusThill.github.io/">
          
            <img class="logo" src="https://MarkusThill.github.io/images/logo.png" alt="ML & Stats">
          
          <a href="https://MarkusThill.github.io/" class="title"> ML & Stats</a>
        </a>
      </li>
      
        
        

        
            
                <li class="header-item "><a href="https://MarkusThill.github.io/posts"><h3>Posts</h3></a></li>
            
        
      
        
        

        
          <li class="header-item "><a href="https://MarkusThill.github.io/categories"><h3>Categories</h3></a>
            <ul class="header-submenu">
              
                
                  <li class="sub-item"><a href="https://MarkusThill.github.io/categories/#Electronics">Electronics</a></li>
              
                
                  <li class="sub-item"><a href="https://MarkusThill.github.io/categories/#ML">ML</a></li>
              
                
                  <li class="sub-item"><a href="https://MarkusThill.github.io/categories/#Math">Math</a></li>
              
                
                  <li class="sub-item"><a href="https://MarkusThill.github.io/categories/#Programming">Programming</a></li>
              
                
                  <li class="sub-item"><a href="https://MarkusThill.github.io/categories/#Stats">Stats</a></li>
              
                
                  <li class="sub-item"><a href="https://MarkusThill.github.io/categories/#Template">Template</a></li>
              
                
                  <li class="sub-item"><a href="https://MarkusThill.github.io/categories/#Vector Algebra">Vector Algebra</a></li>
              
            </ul>
          </li>
        
      
        
        

        
            
                <li class="header-item "><a href="https://MarkusThill.github.io/tags"><h3>Tags</h3></a></li>
            
        
      
        
        

        
            
                <li class="header-item "><a href="https://MarkusThill.github.io/markus"><h3>About</h3></a></li>
            
        
      
        
        

        
            
                <li class="header-item "><a href="https://MarkusThill.github.io/"><h3>Home</h3></a></li>
            
        
      
      <li class="header-item"><a href="https://MarkusThill.github.io/search"><h3><i class="fa fa-search"></i></h3></a></li>
    </ul>
  </div>
<div class="entry-header">
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>The Monkey and Coconut Problem</h1>
      
        <h2><span class="entry-date date published updated"><time datetime="2018-07-06T20:06:57+02:00">July 06, 2018</time></span></h2>
      

      
        <p class="entry-reading-time">
          <i class="fa fa-clock-o"></i>
          
          Reading time ~6 minutes
        </p><!-- /.entry-reading-time -->
      
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->


<nav id="menu" style="display: none">
  <ul>
    
      
        <li><a href="https://MarkusThill.github.io/"><h3>Home</h3></a></li>
      
    
      
        <li><a href="https://MarkusThill.github.io/markus"><h3>About</h3></a></li>
      
    
      
        <li><a href="https://MarkusThill.github.io/tags"><h3>Tags</h3></a></li>
      
    
      
        <li><a href="https://MarkusThill.github.io/categories"><h3>Categories</h3></a>
          <ul>
            
              
                <li><a href="https://MarkusThill.github.io/categories/#Electronics">Electronics</a></li>
            
              
                <li><a href="https://MarkusThill.github.io/categories/#ML">ML</a></li>
            
              
                <li><a href="https://MarkusThill.github.io/categories/#Math">Math</a></li>
            
              
                <li><a href="https://MarkusThill.github.io/categories/#Programming">Programming</a></li>
            
              
                <li><a href="https://MarkusThill.github.io/categories/#Stats">Stats</a></li>
            
              
                <li><a href="https://MarkusThill.github.io/categories/#Template">Template</a></li>
            
              
                <li><a href="https://MarkusThill.github.io/categories/#Vector Algebra">Vector Algebra</a></li>
            
          </ul>
        </li>
      
    
      
        <li><a href="https://MarkusThill.github.io/posts"><h3>Posts</h3></a></li>
      
    
  </ul>
</nav>




<div id="main" role="main">
  <article class="hentry">
    <div class="entry-content">
        
            <div class="entry-image-index">
              <img src="https://MarkusThill.github.io/images/sourcedargent.jpg" alt="The Monkey and Coconut Problem">
              
            </div>
        
      <h1 class="post-title entry-title">The Monkey and Coconut Problem</h1>
      <p>Three sailors, who live together with a monkey as shipwrecked on an abandoned island, collected one day a heap of coconuts, which is to be divided in the early of the next day among the sailors. Sometime in the night one of the sailors gets up and divides the pile into 3 equal parts. A coconut remains, which he gives to the monkey.  Afterwards he hides his share and puts the remaining coconuts together again to a heap. Later that night, the other two sailors also get up and repeat the work of the first sailor. The following morning the three sailors get up, divide the remaining pile into three parts. Again a coconut remains, which they give to the monkey. How many coconuts were originally in the heap?</p>

<p>Also, a general solution is to be found for n coconuts, k sailors and m monkeys.</p>

<!--more-->

<h2 id="derivation">Derivation</h2>

<p>So, let us start writing down the given information in a more mathmatical form, but without too much strict math.
To summarize, we have a number of
\begin{align}
k \in \mathbb{N_+} \backslash { 1}
\end{align}
sailors (only one sailor is not interesting, so we remove this case from our discussions), the number of coconuts which were collected by the sailors before the night
\begin{align}
n \in \mathbb{N_+},
\end{align}
and the number of monkeys
\begin{align}
m \in \mathbb{N_+}, \  m &lt; k.
\end{align}</p>

<p>The first sailor who wakes up first divides the number of coconuts by the number of sailors. He gives the remaining coconuts to the monkeys. This results in k shares, which have the size (n-1)/k. The first sailor buries his (stolen) share, leaving behind the following number of coconuts:
\begin{align}
	n_1 = \frac{n-m}{k}(k-1)=(n-m)\frac{k-1}{k} \label{eq:n1}
\end{align}
The second sailor, who wakes up, repeats the procedure of the first one:
<script type="math/tex">% <![CDATA[
\begin{align}
	n_2 &= (n_1-m)\frac{k-1}{k}=\big((n-m)\frac{k-1}{k} -m  \big) \frac{k-1}{k} \\
	&= (n-1) \big(\frac{k-1}{k} \big)^2 - m\frac{k-1}{k}
\end{align} %]]></script>
Then, the third sailor wakes up and does the same again:
<script type="math/tex">% <![CDATA[
\begin{align}
	n_3 &= \Bigg(\bigg((n-m)\frac{k-1}{k}-m\bigg)\frac{k-1}{k} - m\Bigg) \frac{k-1}{k} \\
	&= (n-m) \Big(\frac{k-1}{k}\Big)^3 - m\Big(\frac{k-1}{k}\Big)^2 - m\frac{k-1}{k}
\end{align} %]]></script>
So, for the i-th sailor, with <script type="math/tex">1 \leq i\leq k</script>, we find the general recursive rule:
<script type="math/tex">\begin{align}
	n_i = (n_{i-1}-m)\frac{k-1}{k}.
\end{align}</script>
For every sailor, we subtract off one from the previous number <script type="math/tex">n_{i-1}</script> and then multiply by <script type="math/tex">\frac{k-1}{k}</script>. This relationship can also be expressed as (for <script type="math/tex">i>1</script>):
<script type="math/tex">% <![CDATA[
\begin{align}
	n_i &= (n-m)\bigg(\frac{k-1}{k} \bigg)^i - m\bigg(\frac{k-1}{k} \bigg)^{i-1} - \ldots - m\frac{k-1}{k} \\
	&= (n-m)\bigg(\frac{k-1}{k} \bigg)^i - m\sum_{\substack{j=1 \\ i>1}}^{i-1}\bigg(\frac{k-1}{k} \bigg)^j
\end{align} %]]></script>
For our convenience, we define the initial number of coconuts as <script type="math/tex">n_0 = n</script>. Hence, we can write <script type="math/tex">n_i</script> for all <script type="math/tex">0 \leq i\leq k</script> as:
<script type="math/tex">% <![CDATA[
\begin{align}
	n_i=\begin{cases}
		n, & \mbox{for} \ i=0 \\
		(n-m)\bigg(\frac{k-1}{k} \bigg)^i - m\sum\limits_{\substack{j=1 \\ i>1}}^{i-1}\bigg(\frac{k-1}{k} \bigg)^j, & \mbox{else}
	\end{cases}
	\label{eq:iterativeForm}
\end{align} %]]></script></p>

<p>In order to find an initial amount of coconuts <script type="math/tex">n</script>, we have to ensure that all <script type="math/tex">n_i</script> are dividable by <script type="math/tex">k</script> with a remainder of one (which is given to the monkey). Hence, it has to be ensured that:
<script type="math/tex">\begin{align}
	\forall i \in \{ 0, \ldots, k\}: \ n_i \equiv m\mod k
	\label{eq:forallI}
\end{align}</script>
Remember that in the morning, after all <script type="math/tex">k</script> sailors have woken up, the remaining coconuts are divided among all sailors. So, as stated above, also <script type="math/tex">n_k</script> has to have a remainder of one when divided by <script type="math/tex">k</script>. For <script type="math/tex">n_0=n</script> it is sufficient to ensure that <script type="math/tex">n</script> is a multiple of <script type="math/tex">k</script> plus <script type="math/tex">m</script>. For larger <script type="math/tex">i</script>, everything gets slightly more difficult. We have to find an <script type="math/tex">n</script> for Eq. \eqref{eq:iterativeForm} such that Eq. \eqref{eq:forallI} is satisfied. To do so, let us first simplify the complicated expression (for now assuming <script type="math/tex">i>1</script>) in Eq. \eqref{eq:iterativeForm} using the geometric series specified in the Appendix:</p>

<script type="math/tex; mode=display">% <![CDATA[
\begin{align}
	& \ \ (n-m)\bigg(\frac{k-1}{k} \bigg)^i - m\sum\limits_{\substack{j=1 \\ i>1}}^{i-1}\bigg(\frac{k-1}{k} \bigg)^j \label{eq:probWithSum} \\
	&= (n-m)\bigg(\frac{k-1}{k} \bigg)^i - m\frac{ \Big(\frac{k-1}{k}\Big)^i - \frac{k-1}{k}}{\frac{k-1}{k} - 1} \\
	&= (n-m)\bigg(\frac{k-1}{k} \bigg)^i - m\frac{ \Big(\frac{k-1}{k}\Big)^i - \frac{k-1}{k}}{-\frac{1}{k}} \\
	&= (n-m)\bigg(\frac{k-1}{k} \bigg)^i + mk \bigg(\frac{k-1}{k} \bigg)^i-mk+m \\
	&= (n-m+mk)\bigg(\frac{k-1}{k} \bigg)^i -mk+m. \label{eq:iterativeSimple}
\end{align} %]]></script>

<p>Now we can try to find an <script type="math/tex">n</script> that suffices Eq. \eqref{eq:forallI}:</p>

<script type="math/tex; mode=display">% <![CDATA[
\begin{align}
(n-m+mk)\bigg(\frac{k-1}{k} \bigg)^i -mk+m &\equiv m \mod k \\
(n-m+mk)\bigg(\frac{k-1}{k} \bigg)^i -mk &\equiv 0 \mod k \\
(n-m+mk)\bigg(\frac{k-1}{k} \bigg)^i &\equiv 0 \mod k \label{eq:modulo}
\end{align} %]]></script>

<p>Note that we cannot get rid of the term <script type="math/tex">mk</script>, since the power of the fraction is smaller than one and not a natural number. The left-hand side of Eq. \eqref{eq:modulo} should hence be a multiple of <script type="math/tex">k</script>. This can be expressed as:</p>

<script type="math/tex; mode=display">\begin{align}
	(n-m+mk)\bigg(\frac{k-1}{k} \bigg)^i = r\cdot k,
\end{align}</script>

<p>where for now we choose <script type="math/tex">r \in \mathbb{Z}</script> and then solve for <script type="math/tex">n</script>:</p>

<script type="math/tex; mode=display">% <![CDATA[
\begin{align}
	(n-m+mk)\bigg(\frac{k-1}{k} \bigg)^i &= r\cdot k \\
	n-m+mk &= r\cdot k \bigg(\frac{k}{k-1} \bigg)^i \\
	n &= r\cdot k \bigg(\frac{k}{k-1} \bigg)^i - mk + m \\
	n &= r\cdot \frac{k^{k+1}}{(k-1)^i} - m(k -1) \label{eq:firstN}.
\end{align} %]]></script>

<p>Although we can now compute different values for <script type="math/tex">n</script> according to \eqref{eq:firstN} which will suffice Eq. \eqref{eq:modulo}, we can observe a problem: For example, with <script type="math/tex">i=k=3</script> and <script type="math/tex">m=r=1</script> we receive a value of <script type="math/tex">n=8.125</script>, which – although it suffices Eq. \eqref{eq:modulo} – is not a natural number. This is due to the fraction in Eq. \eqref{eq:firstN}. However, we show in the Appendix that numerator and denominator are relatively prime to each other, hence, the fraction cannot be reduced. So, in order to obtain a natural number for <script type="math/tex">n</script>, we can drag the denominator to <script type="math/tex">r</script> and assume that <script type="math/tex">r</script> is a multiple of it by replacing <script type="math/tex">r/(k-1)^i</script> with <script type="math/tex">q \in \mathbb{N_+}</script>:</p>

<script type="math/tex; mode=display">% <![CDATA[
\begin{align}
	n &= r\cdot \frac{k^{k+1}}{(k-1)^i} - m(k -1) \\
	&= \frac{r}{(k-1)^i} \cdot k^{k+1} - m(k -1) \\
	&= q \cdot k^{k+1} - m(k -1). \label{eq:finalSolution}
\end{align} %]]></script>

<p>Note that in Eq. \eqref{eq:finalSolution} we have an expression which is independent of <script type="math/tex">i</script> and hence fulfills Eq. \eqref{eq:forallI} for all <script type="math/tex">i \in \{2, \ldots, k \}</script>.</p>

<p>You might have noticed that we actually only solved the problem for <script type="math/tex">i>1</script>, since the sum in Eq. \eqref{eq:probWithSum} is only evaluated for <script type="math/tex">i>1</script>. However, Eq. \eqref{eq:forallI} demands for all <script type="math/tex">i \in \{0, \ldots, k \}</script> – so also for <script type="math/tex">i=0</script> and <script type="math/tex">i=1</script> – that <script type="math/tex">n_i \equiv m\mod k</script>. We can directly see that Eq. \eqref{eq:finalSolution} is also a valid solution for the case <script type="math/tex">i=0</script> and we can furthermore show that also the case <script type="math/tex">i=1</script> specified in Eq. \eqref{eq:n1} is only a special case of Eq. \eqref{eq:firstN}, with:</p>

<script type="math/tex; mode=display">% <![CDATA[
\begin{align}
	(n-m)\frac{k-1}{k} &\equiv m\mod k \\
	\Rightarrow (n-m)\frac{k-1}{k} &= s \cdot k + m \\
	n &= s \cdot k\frac{k}{k-1} + m\frac{k}{k-1} + m \\
	&= \frac{sk^2+mk}{k-1} + m \label{eq:casen1}
\end{align} %]]></script>

<p>and:</p>

<script type="math/tex; mode=display">% <![CDATA[
\begin{align}
	\frac{sk^2+mk}{k-1} + m &= r\cdot \frac{k^{k+1}}{(k-1)^1} - mk + m \\
	sk^2+mk &= r k^{k+1} - mk(k-1) \\
	sk +m &= rk^k - mk + m \\
	s &= rk^{k-1} - m \in \mathbb{N}.
\end{align} %]]></script>

<p>Hence, if we insert <script type="math/tex">s</script> into Eq. \eqref{eq:casen1} we obtain Eq. \eqref{eq:firstN} which then leads to the general solution in Eq. \eqref{eq:finalSolution}.</p>

<h2 id="verification">Verification</h2>
<p>To make sure that we have obtained a correct solution, let us run some simulations where we try many values for <script type="math/tex">n=n_0</script> and check if these values correspond to Eq. \eqref{eq:finalSolution}.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># Number of Sailors</span><span class="w">
</span><span class="n">k</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">3</span><span class="w">

</span><span class="c1"># Number of Monkeys on the island</span><span class="w">
</span><span class="n">m</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">2</span><span class="w">

</span><span class="c1"># Range of coconuts to try (1 2 3 ... n_max):</span><span class="w">
</span><span class="n">n_max</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">1e6</span><span class="w">

</span><span class="c1"># There should be less monkeys than sailors</span><span class="w">
</span><span class="n">stopifnot</span><span class="p">(</span><span class="n">m</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">k</span><span class="p">)</span><span class="w">

</span><span class="c1"># Recursive function simulating the sailors behaviour</span><span class="w">
</span><span class="n">divideCocos</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">sailor</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="k">if</span><span class="p">(</span><span class="n">sailor</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="n">return</span><span class="w"> </span><span class="p">(</span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
  </span><span class="k">if</span><span class="p">((</span><span class="n">n</span><span class="w"> </span><span class="o">%%</span><span class="w"> </span><span class="n">k</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">m</span><span class="p">)</span><span class="w"> </span><span class="n">return</span><span class="w"> </span><span class="p">(</span><span class="n">divideCocos</span><span class="p">((</span><span class="n">n</span><span class="o">-</span><span class="n">m</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">k</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="p">),</span><span class="w"> </span><span class="n">sailor</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="p">))</span><span class="w">
  </span><span class="kc">FALSE</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="n">tryN</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sapply</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="n">n_max</span><span class="p">,</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="n">divideCocos</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">k</span><span class="p">))</span><span class="w">
</span><span class="n">realN</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">which</span><span class="p">(</span><span class="n">tryN</span><span class="p">)</span><span class="w">

</span><span class="c1"># Compare with formula</span><span class="w">
</span><span class="n">formulaNCocos</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">q</span><span class="p">,</span><span class="w"> </span><span class="n">k</span><span class="p">,</span><span class="w"> </span><span class="n">m</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">q</span><span class="o">*</span><span class="n">k</span><span class="o">^</span><span class="p">(</span><span class="n">k</span><span class="m">+1</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">m</span><span class="o">*</span><span class="p">(</span><span class="n">k</span><span class="m">-1</span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="n">formulaN</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sapply</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="nf">length</span><span class="p">(</span><span class="n">realN</span><span class="p">),</span><span class="w"> </span><span class="n">formulaNCocos</span><span class="p">,</span><span class="w"> </span><span class="n">k</span><span class="p">,</span><span class="w"> </span><span class="n">m</span><span class="p">)</span><span class="w">

</span><span class="c1"># Check if the simulated results fit to the formula we obtained</span><span class="w">
</span><span class="n">anyError</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">which</span><span class="p">(</span><span class="n">formulaN</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">realN</span><span class="p">)</span><span class="w">
</span><span class="n">stopifnot</span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="n">anyError</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w">

</span><span class="n">cat</span><span class="p">(</span><span class="s2">"Formula appears to be correct!!!\n"</span><span class="p">)</span><span class="w">
</span><span class="n">cat</span><span class="p">(</span><span class="s2">"\nSome numbers n that work:"</span><span class="p">,</span><span class="w"> </span><span class="n">realN</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="nf">min</span><span class="p">(</span><span class="m">25</span><span class="p">,</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">realN</span><span class="p">))])</span></code></pre></figure>
<!---* -->

<p>We can run this R-script for different settings of sailors and monkeys and check if there are any differences between the simulated results and the formula. In such a case, the formula would be wrong.
But after trying several combinations we can be quite confident that the formula is correct (although the computer simulation is certainly not a real proof). For our initial setup with <script type="math/tex">k=3</script> sailors and <script type="math/tex">m=1</script> monkeys we get the following result with the R-script:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">Formula</span><span class="w"> </span><span class="n">appears</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">correct</span><span class="o">!!!</span><span class="w">
</span><span class="n">Some</span><span class="w"> </span><span class="n">numbers</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">work</span><span class="o">:</span><span class="w"> </span><span class="m">79</span><span class="w"> </span><span class="m">160</span><span class="w"> </span><span class="m">241</span><span class="w"> </span><span class="m">322</span><span class="w"> </span><span class="m">403</span><span class="w"> </span><span class="m">484</span><span class="w"> </span><span class="m">565</span><span class="w"> </span><span class="m">646</span><span class="w"> </span><span class="m">727</span><span class="w"> </span><span class="m">808</span><span class="w"> </span><span class="m">889</span><span class="w"> </span><span class="m">970</span><span class="w"> </span><span class="m">1051</span><span class="w"> </span><span class="m">1132</span><span class="w"> </span><span class="m">1213</span><span class="w"> </span><span class="m">1294</span><span class="w"> </span><span class="m">1375</span><span class="w"> </span><span class="m">1456</span><span class="w"> </span><span class="m">1537</span><span class="w"> </span><span class="m">1618</span><span class="w"> </span><span class="m">1699</span><span class="w"> </span><span class="m">1780</span><span class="w"> </span><span class="m">1861</span><span class="w"> </span><span class="m">1942</span><span class="w"> </span><span class="m">2023</span></code></pre></figure>

<h1 id="summary">Summary</h1>
<p>As we found, it is possible to find a general algebraic solution to the coconut and monkey problem described in the beginning. The number of coconuts that were initially collected, for <script type="math/tex">k</script> sailors and <script type="math/tex">m</script> monkeys, is given by:</p>

<script type="math/tex; mode=display">\begin{align}
	n = q \cdot k^{k+1} - m(k -1),
\end{align}</script>

<p>where <script type="math/tex">q</script> is a natural number larger than 0, since there are infinitely many solutions.</p>

<h1 id="appendix">Appendix</h1>

<h2 id="geometric-series">Geometric Series</h2>
<p>In this appendix we briefly mention several properties of the geometric series which are required for the derivations in other dependencies.
For <script type="math/tex">q \neq 1</script> and <script type="math/tex">% <![CDATA[
j<N %]]></script> the geometric series can be derived as:</p>

<script type="math/tex; mode=display">\begin{equation}
\begin{split}
S = q^{j}+q^{j+1}+ \cdots + q^{N-1} \\
qS = q^{j+1} + q^{j+2} + \cdots + q^N \\
qS - S = q^N - q^j \\
S(q-1) = q^N - q^j \\
S = \frac{q^N - q^j}{q-1} = \frac{q^j-q^N}{1-q}
\end{split}
\label{eq:geometricSeries1}
\end{equation}</script>

<p>More generally, the geometric series can be written as:</p>

<script type="math/tex; mode=display">\begin{equation}
\begin{split}
a_0 \sum_{i=j}^{N-1} {q^i} = a_0 \frac{q^N - q^j}{q-1}
\end{split}
\label{eq:geometricSeries2}
\end{equation}</script>

<p>Special cases</p>

<p>If the series starts with <script type="math/tex">i=0</script> we retrieve:</p>

<script type="math/tex; mode=display">\begin{equation}
\begin{split}
a_0 \sum_{i=0}^{N-1} {q^i} = a_0 \frac{1- q^N}{1-q}
\end{split}
\label{eq:geometricSeries2a}
\end{equation}</script>

<p>For <script type="math/tex">q=1</script> we obtain:
\begin{equation}
\begin{split}
a_0 \sum_{i=j}^{N-1} {1^i} = a_0 (N-j)
\end{split}
\label{eq:geometricSeries3}
\end{equation}
For an infinite series with <script type="math/tex">N=\infty</script>, convergence is achieved for values <script type="math/tex">% <![CDATA[
|q|<1 %]]></script>:
\begin{equation}
\begin{split}
a_0 \sum_{i=j}^{\infty} {q^i} = a_0 \frac{q^j}{1-q}
\end{split}
\label{eq:geometricSeries4}
\end{equation}</p>

<h2 id="powers-of-neighbored-natural-numbers-are-relatively-prime">Powers of neighbored natural numbers are relatively prime</h2>

<p>In this appendix we briefly show that two neighbored natural numbers <script type="math/tex">k</script> and <script type="math/tex">k+1</script> are relatively prime, as well as their powers. This can be done with a proof by contradiction:
Let us assume that there exists a divisor <script type="math/tex">t>1</script> for which:
\begin{align}
k &amp;= q \cdot t <br />
k+1 &amp;= r \cdot t
\end{align}
This also implies:
\begin{align}
r &gt; q <br />
r - q \geq 1
\end{align}
We can also write:</p>

<script type="math/tex; mode=display">% <![CDATA[
\begin{align}
q \cdot t + 1 &= r \cdot t \\
 1 &= r \cdot t - q \cdot t \\
 1 &= (r- q) \cdot t  \\
 & \Rightarrow r - q = 1 \wedge t = 1.
\end{align} %]]></script>

<p>Since we required <script type="math/tex">t>1</script>, we have a contradiction, which means that the two neighbored numbers <script type="math/tex">k</script> and <script type="math/tex">k+1</script> are relatively prime and a fraction containing these two numbers in the numerator and denominator cannot be reduced. Furthermore, since the prime factorization of <script type="math/tex">k</script> and <script type="math/tex">k+1</script> returns two disjoint sets of primes <script type="math/tex">P_{k}</script> and <script type="math/tex">P_{k+1}</script> (<script type="math/tex">P_{k} \cap P_{k+1} = \emptyset</script>), it can also be trivially shown that the powers <script type="math/tex">k^i</script> and <script type="math/tex">(k+1)^j</script>, with <script type="math/tex">i,j \in \mathbb{N_+}</script> are also relatively prime.</p>

      <footer class="entry-meta">
        <span class="entry-tags"></span>
        
        <span class="author vcard"><span class="fn">Markus Thill</span></span>
        <div class="social-share">
  <ul class="socialcount socialcount-small inline-list">
    <li class="facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=https://MarkusThill.github.io/math/stats/the-sailors-problem/" title="Share on Facebook"><span class="count"><i class="fa fa-facebook-square"></i> Like</span></a></li>
    <li class="twitter"><a href="https://twitter.com/intent/tweet?text=https://MarkusThill.github.io/math/stats/the-sailors-problem/" title="Share on Twitter"><span class="count"><i class="fa fa-twitter-square"></i> Tweet</span></a></li>
    <li class="googleplus"><a href="https://plus.google.com/share?url=https://MarkusThill.github.io/math/stats/the-sailors-problem/" title="Share on Google Plus"><span class="count"><i class="fa fa-google-plus-square"></i> +1</span></a></li>
  </ul>
</div><!-- /.social-share -->

      </footer>
    </div><!-- /.entry-content -->
    <div class="read-more">
  <div class="read-more-header">
    <a href="https://MarkusThill.github.io/markus" class="read-more-btn">About the Author</a>
  </div><!-- /.read-more-header -->
  <div class="read-more-content author-info">
    <h3>Markus Thill</h3>
    <div class="author-container">
      <img class="author-img" src="https://MarkusThill.github.io/images/avatar.jpg" alt="Markus Thill" />
      <div class="author-bio">I studied computer engineering (B.Sc.) and Automation & IT (M.Eng.). Generally, I am interested in machine learning (ML) approaches (in the broadest sense), but particularly in the fields of time series analysis, anomaly detection, Reinforcement Learning (e.g. for board games), Deep Learning (DL) and incremental (on-line) learning procedures. </div>
    </div>
    <div class="author-share">
      <ul class="list-inline social-buttons">
        
          <li><a href="https://github.com/markusthill" target="_blank"><i class="fa fa-github fa-fw"></i></a></li>
        
          <li><a href="https://www.linkedin.com/in/markus-thill-a4991090/" target="_blank"><i class="fa fa-linkedin fa-fw"></i></a></li>
        
      </ul>
      
        <a aria-label="Follow @MarkusThill on GitHub" data-size="large" href="https://github.com/MarkusThill" class="github-button">Follow @MarkusThill</a>
      
      <br>
      
    </div>
  </div>
</div>

    <section id="disqus_thread"></section><!-- /#disqus_thread -->
    <div class="read-more">
  
    <div class="read-more-header">
      <a href="https://MarkusThill.github.io/a-few-notes-on-the-runtime-complexity-of-latin-hypercube-sampling/" class="read-more-btn">Read More</a>
    </div><!-- /.read-more-header -->
    <div class="read-more-content">
      <h3><a href="https://MarkusThill.github.io/deriving-a-closed-form-solution-of-the-fibonacci-sequence/" title="Deriving a Closed-Form Solution of the Fibonacci Sequence using the Z-Transform">Deriving a Closed-Form Solution of the Fibonacci Sequence using the Z-Transform</a></h3>
      <p>The Fibonacci sequence might be one of the most famous sequences in the field of mathmatics and computer science. Already high school stu...&hellip; <a href="https://MarkusThill.github.io/deriving-a-closed-form-solution-of-the-fibonacci-sequence/">Continue reading</a></p>
    </div><!-- /.read-more-content -->
  
  <div class="read-more-list">
    
      <div class="list-item">
        <h4><a href="https://MarkusThill.github.io/derivation-of-a-weighted-recursive-least-squares-estimator/" title="Derivation of a Weighted Recursive Linear Least Squares Estimator">Derivation of a Weighted Recursive Linear Least Squares Estimator</a></h4>
        <span>Published on May 05, 2019</span>
      </div><!-- /.list-item -->
    
      <div class="list-item">
        <h4><a href="https://MarkusThill.github.io/gaussian-distribution-with-a-diagonal-covariance-matrix/" title="Gaussian Distribution With a Diagonal Covariance Matrix">Gaussian Distribution With a Diagonal Covariance Matrix</a></h4>
        <span>Published on May 04, 2019</span>
      </div><!-- /.list-item -->
    
  </div><!-- /.read-more-list -->
</div><!-- /.read-more -->
  </article>
</div><!-- /#main -->

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">window.jQuery || document.write('<script type="text/javascript" src="https://MarkusThill.github.io/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script type="text/javascript" src="https://MarkusThill.github.io/assets/js/scripts.min.js"></script>
<script type="text/javascript" async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>
<script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^https:/.test(d.location)?'https':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>



<!-- Asynchronous Google Analytics snippet -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-113918188-1', 'auto');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>



    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'markusthill-github-io'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>




<script type="text/javascript">
    sharing();
</script>



<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2019 Markus Thill. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://github.com/aron-bordin/neo-hpstr-jekyll-theme" rel="nofollow">Neo-HPSTR Theme</a>.</span>

  </footer>
</div><!-- /.footer-wrapper -->

</body>
</html>
